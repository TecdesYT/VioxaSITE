<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<title>MiniTube ‚Äì Interface YouTube Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
*{box-sizing:border-box}
body{margin:0;font-family:Roboto,Arial,sans-serif;background:#f9f9f9;color:#0f0f0f}

/* HEADER */
header{position:fixed;top:0;left:0;right:0;height:56px;display:flex;align-items:center;gap:16px;padding:0 16px;background:#fff;border-bottom:1px solid #ddd;z-index:10}
.logo{font-weight:700;font-size:20px;color:#ff0000}
header input{flex:1;max-width:600px;padding:8px;border:1px solid #ccc;border-radius:2px}
header button{padding:8px 12px;border:1px solid #ccc;background:#f0f0f0;cursor:pointer}

/* LAYOUT */
.container{display:flex;margin-top:56px}

/* SIDEBAR */
aside{width:220px;padding:12px;border-right:1px solid #ddd;background:#fff}
.aside-item{padding:10px;border-radius:8px;cursor:pointer}
.aside-item:hover{background:#eee}

/* MAIN */
main{flex:1;padding:24px}

/* FILTERS */
.filters{display:flex;gap:8px;margin-bottom:20px;overflow-x:auto}
.filter{padding:6px 12px;background:#eee;border-radius:16px;font-size:14px;cursor:pointer;white-space:nowrap}
.filter.active{background:#0f0f0f;color:white}

/* GRID */
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}
.card{cursor:pointer}
.thumb{width:100%;height:170px;background:#ccc;border-radius:12px}
.card h3{margin:8px 0 4px;font-size:16px}
.card p{margin:0;color:#555;font-size:14px}

/* CHANNEL PAGE */
.channel-head{display:flex;gap:16px;align-items:center;margin-bottom:20px}
.avatar{width:80px;height:80px;border-radius:50%;background:#ccc}

/* VIDEO PAGE */
video{width:100%;max-height:70vh;border-radius:12px;background:black}
textarea{width:100%;padding:8px}
</style>
</head>
<body>

<header>
  <div class="logo">MiniTube</div>
  <input id="search" placeholder="Rechercher" />
  <button onclick="searchChannel()">üîç</button>

  <div style="margin-left:auto;display:flex;align-items:center;gap:12px;position:relative">
    <button id="createBtn" style="padding:8px 12px;border-radius:18px;border:1px solid #ccc;background:#fff;cursor:pointer" onclick="openCreate()">‚ûï Cr√©er</button>
    <button id="loginBtn" style="padding:8px 12px;border-radius:18px;border:1px solid #065fd4;background:#065fd4;color:white;cursor:pointer" onclick="login()">Se connecter</button>
    <div id="profile" style="display:none;width:32px;height:32px;border-radius:50%;background:#ccc;align-items:center;justify-content:center;font-weight:bold;cursor:pointer" onclick="toggleMenu()"></div>

    <div id="menu" style="display:none;position:absolute;top:56px;right:0;background:#fff;color:#000;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.2);width:260px;overflow:hidden;z-index:20">
      <div style="padding:16px;display:flex;gap:12px;align-items:center;border-bottom:1px solid #ddd">
        <div id="menuAvatar" style="width:40px;height:40px;border-radius:50%;background:#ccc;display:flex;align-items:center;justify-content:center;font-weight:bold"></div>
        <div>
          <strong id="menuName"></strong><br>
          <span style="color:#065fd4;cursor:pointer">Afficher votre cha√Æne</span>
        </div>
      </div>
      <div style="padding:12px;cursor:pointer">Compte MiniTube</div>
      <div style="padding:12px;cursor:pointer">Changer de compte</div>
      <div style="padding:12px;cursor:pointer" onclick="logout()">Se d√©connecter</div>
    </div>
  </div>
</header>

<div class="container">
<aside>
  <div class="aside-item">üè† Accueil</div>
  <div class="aside-item">üé¨ Shorts</div>
  <div class="aside-item">üì∫ Abonnements</div>
</aside>

<main>
  <div class="filters">
    <div class="filter active">Tous</div>
    <div class="filter">Musique</div>
    <div class="filter">Jeux vid√©o</div>
    <div class="filter">Podcasts</div>
    <div class="filter">Cuisine</div>
  </div>

  <div id="view"></div>
</main>
</div>

<script>
let data = JSON.parse(localStorage.getItem('data') || '{}');
let view = document.getElementById('view');
let currentUser = localStorage.getItem('currentUser');

updateHeader();
renderHome();

function updateHeader(){
  const loginBtn = document.getElementById('loginBtn');
  const profile = document.getElementById('profile');
  const menuName = document.getElementById('menuName');
  const menuAvatar = document.getElementById('menuAvatar');

  if(currentUser){
    loginBtn.style.display = 'none';
    profile.style.display = 'flex';
    profile.textContent = currentUser[0].toUpperCase();
    menuName.textContent = currentUser;
    menuAvatar.textContent = currentUser[0].toUpperCase();
  } else {
    loginBtn.style.display = 'block';
    profile.style.display = 'none';
    document.getElementById('menu').style.display = 'none';
  }
}

function login(){
  const name = prompt('Nom du compte MiniTube');
  if(!name) return;
  currentUser = name;
  localStorage.setItem('currentUser', name);
  updateHeader();
}

function toggleMenu(){
  const menu = document.getElementById('menu');
  menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
}

function logout(){
  currentUser = null;
  localStorage.removeItem('currentUser');
  updateHeader();
}

function openCreate(){
  if(!currentUser) return alert('Connecte-toi pour cr√©er');
  alert('Cr√©er : Upload vid√©o / Live / Post (√† venir)');
}

function renderHome(){
  let videos = [];
  Object.keys(data).forEach(c => {
    if(data[c].videos){
      data[c].videos.forEach(v => videos.push({...v, channel: c}));
    }
  });

  view.innerHTML = `<div class='grid'>${videos.map((v,i)=>`
    <div class='card' onclick="openVideo('${v.channel}',${i})">
      <div class='thumb'></div>
      <h3>${v.title}</h3>
      <p>${v.channel}</p>
    </div>`).join('')}
  </div>`;
}

function searchChannel(){
  const q = search.value.trim();
  if(!data[q]) return alert('Cha√Æne introuvable');
  const c = data[q];

  view.innerHTML = `
    <div class='channel-head'>
      <div class='avatar'></div>
      <div><h2>${q}</h2><p>${c.videos?.length || 0} vid√©os</p></div>
    </div>
    <div class='grid'>${(c.videos||[]).map((v,i)=>`
      <div class='card' onclick="openVideo('${q}',${i})">
        <div class='thumb'></div>
        <h3>${v.title}</h3>
      </div>`).join('')}
    </div>`;
}

function openVideo(c,i){
  const v = data[c].videos[i];
  view.innerHTML = `
    <video controls src='${v.url}'></video>
    <h2>${v.title}</h2>
    <p>${c}</p>`;
}
</script>
</body>
</html>
